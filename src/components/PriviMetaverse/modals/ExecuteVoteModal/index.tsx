import React, { useState } from "react";
import { CopyToClipboard } from "react-copy-to-clipboard";
import { Button } from "@material-ui/core";
import Box from "shared/ui-kit/Box";
import { Modal, PrimaryButton } from "shared/ui-kit";
import { getDefaultBGImage } from "shared/services/user/getUserAvatar";
import { useAlertMessage } from "shared/hooks/useAlertMessage";
import { useModalStyles } from "./index.styles";

require("dotenv").config();
const isProd = process.env.REACT_APP_ENV === "prod";

export default function ExecuteVoteModal({
  open,
  onClose,
}: {
  open: boolean;
  onClose: () => void;
}) {
  const classes = useModalStyles();
  const { showAlertMessage } = useAlertMessage();
  const [ step, setStep ] = useState<number>(1);

  return (
    <Modal showCloseIcon isOpen={open} onClose={onClose} className={classes.root} size="small">
      {step === 1 && (
        <Box style={{marginTop: 115, marginBottom: 98}}>
          <ProgressIcon />
          <Box className={classes.title} mt={4}>
            Adding Extension
          </Box>
          <Box className={classes.header1} mt={2} mb={2}>
            Transaction is proceeding on Polygon Chain.<br/>
            This can take a moment, please be patient...
          </Box>
          <CopyToClipboard
            text={''}
            onCopy={() => {
              showAlertMessage("Copied to clipboard", { variant: "success" });
            }}
          >
            <Box display="flex" alignItems="center" justifyContent="center" style={{ cursor: "pointer" }}>
              <Box className={classes.header1} mr={2}>
                Hash:
              </Box>
              <Box className={classes.header2} ml={1} mr={1}>
                0xf273a38fec99acf1e....eba
              </Box>
              <CopyIcon />
            </Box>
          </CopyToClipboard>
          <Button
            style={{
              background: "rgba(218, 230, 229, 0.06)",
              marginTop: 48,
              color: "#ffffff",
              textTransform: "uppercase",
              padding: "16px 24px",
              borderRadius: 100,
            }}
            onClick={() => {}}
          >
            Check Polygon Scan
          </Button>
        </Box>
      )}

      {step === 2 && (
        <Box style={{marginTop: 12, marginBottom: 23}}>
          <img src={getDefaultBGImage()} width="397px" height="258px" style={{borderRadius: 12}} />
          <Box className={classes.title} mt={4}>
            Awesome! New extension added.
          </Box>
          <Box className={classes.header1} mt={2} mb={2}>
            Cool! Everything wen’t well and you can enjoy your creation, <br />
            share it and let it out in the world!
          </Box>
          <CopyToClipboard
            text={''}
            onCopy={() => {
              showAlertMessage("Copied to clipboard", { variant: "success" });
            }}
          >
            <Box display="flex" alignItems="center" justifyContent="center" style={{ cursor: "pointer" }}>
              <Box className={classes.header1} mr={2}>
                Hash:
              </Box>
              <Box className={classes.header2} ml={1} mr={1}>
                0xf273a38fec99acf1e....eba
              </Box>
              <CopyIcon />
            </Box>
          </CopyToClipboard>
          <Box className={classes.header1} mt={6}> Share on </Box>
          <Box display={"flex"} justifyContent="center" style={{marginTop: 20, gap: 35}}>
            <TelegramIcon />
            <TwitterIcon />
            <TiktokIcon />
            <FacebookIcon />
            <WhatsAppIcon />
            <InstagramIcon />
          </Box>
        </Box>
      )}

      {step === 3 && (
        <Box style={{marginTop: 98, marginBottom: 95}}>
          <SuccessIcon />
          <Box className={classes.title} mt={4}>
            Transaction successful
          </Box>
          <Box className={classes.header1} mt={2} mb={2}>
            Everything wen’t well.<br/>
            You can chack your transaction link below.
          </Box>
          <CopyToClipboard
            text={''}
            onCopy={() => {
              showAlertMessage("Copied to clipboard", { variant: "success" });
            }}
          >
            <Box display="flex" alignItems="center" justifyContent="center" style={{ cursor: "pointer" }}>
              <Box className={classes.header1} mr={2}>
                Hash:
              </Box>
              <Box className={classes.header2} ml={1} mr={1}>
                0xf273a38fec99acf1e....eba
              </Box>
              <CopyIcon />
            </Box>
          </CopyToClipboard>
          <Button
            style={{
              background: "#00B4F7",
              marginTop: 48,
              color: "#ffffff",
              textTransform: "uppercase",
              padding: "16px 24px",
              borderRadius: "1000px",
              width: 249,
            }}
            onClick={() => {}}
          >
            Done
          </Button>
        </Box>
      )}
    </Modal>
  );
}

const CopyIcon = () => (
  <svg width="21" height="19" viewBox="0 0 21 19" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.0833 11.0833H16.3333C17.2538 11.0833 18 10.3745 18 9.5V3.95833C18 3.08388 17.2538 2.375 16.3333 2.375H10.5C9.57953 2.375 8.83333 3.08388 8.83333 3.95833V5.14583M4.66667 16.625H10.5C11.4205 16.625 12.1667 15.9161 12.1667 15.0417V9.5C12.1667 8.62555 11.4205 7.91667 10.5 7.91667H4.66667C3.74619 7.91667 3 8.62555 3 9.5V15.0417C3 15.9161 3.74619 16.625 4.66667 16.625Z" stroke="#00B4F7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
  </svg>
);

const ProgressIcon = () => (
  <svg width="136" height="151" viewBox="0 0 136 151" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path opacity="0.1" d="M81.579 149.251C72.9445 151.034 64.0432 151.099 55.3835 149.443C46.7238 147.786 38.4752 144.44 31.1087 139.595C23.7423 134.75 17.4021 128.502 12.4503 121.207C7.49853 113.912 4.03206 105.714 2.24884 97.079C0.465613 88.4445 0.400553 79.5432 2.05737 70.8835C3.71419 62.2238 7.06045 53.9752 11.9051 46.6087C16.7497 39.2422 22.9978 32.9021 30.2927 27.9503C37.5876 22.9985 45.7864 19.5321 54.421 17.7488C63.0555 15.9656 71.9568 15.9006 80.6165 17.5574C89.2762 19.2142 97.5248 22.5604 104.891 27.4051C112.258 32.2497 118.598 38.4978 123.55 45.7927C128.501 53.0876 131.968 61.2864 133.751 69.921C135.534 78.5555 135.599 87.4568 133.943 96.1165C132.286 104.776 128.94 113.025 124.095 120.391C119.25 127.758 113.002 134.098 105.707 139.05C98.4124 144.001 90.2136 147.468 81.579 149.251L81.579 149.251Z" stroke="#281136" stroke-width="0.722591" />
    <circle cx="68" cy="67.5" r="67.5" fill="#151515" />
    <path d="M78.9947 119.766C79.2334 120.912 78.4962 122.037 77.3418 122.229C68.8947 123.633 60.2263 123.116 51.9945 120.706C43.0837 118.097 34.9595 113.351 28.3415 106.886C21.7236 100.422 16.8163 92.4401 14.0542 83.6472C11.2921 74.8543 10.7605 65.5219 12.5065 56.4767C14.2526 47.4315 18.2223 38.9527 24.0641 31.7913C29.9059 24.63 37.4394 19.0071 45.9974 15.4208C54.5554 11.8345 63.8736 10.3954 73.1268 11.231C81.6683 12.0024 89.9109 14.6901 97.2345 19.0792C98.2439 19.6841 98.5152 21.0107 97.8646 21.9913C97.2214 22.9606 95.919 23.2259 94.9198 22.6304C88.176 18.6109 80.5947 16.1487 72.7399 15.4394C64.185 14.6668 55.5699 15.9973 47.6577 19.313C39.7455 22.6287 32.7805 27.8272 27.3795 34.4482C21.9785 41.0692 18.3084 48.9082 16.6941 57.2708C15.0798 65.6334 15.5713 74.2616 18.125 82.391C20.6786 90.5204 25.2157 97.9001 31.3342 103.877C37.4527 109.853 44.9639 114.241 53.2023 116.653C60.7664 118.868 68.7293 119.353 76.4936 118.085C77.6428 117.898 78.7571 118.626 78.9947 119.766Z" fill="url(#paint0_angular_7794_139760)" />
    <g clip-path="url(#clip0_7794_139760)">
      <path d="M78.5 61.2004C77.8 60.8004 76.9 60.8004 76.1 61.2004L70.5 64.5004L66.7 66.6004L61.2 69.9004C60.5 70.3004 59.6 70.3004 58.8 69.9004L54.5 67.3004C53.8 66.9004 53.3 66.1004 53.3 65.2004V60.2004C53.3 59.4004 53.7 58.6004 54.5 58.1004L58.8 55.6004C59.5 55.2004 60.4 55.2004 61.2 55.6004L65.5 58.2004C66.2 58.6004 66.7 59.4004 66.7 60.3004V63.6004L70.5 61.4004V58.0004C70.5 57.2004 70.1 56.4004 69.3 55.9004L61.3 51.2004C60.6 50.8004 59.7 50.8004 58.9 51.2004L50.7 56.0004C49.9 56.4004 49.5 57.2004 49.5 58.0004V67.4004C49.5 68.2004 49.9 69.0004 50.7 69.5004L58.8 74.2004C59.5 74.6004 60.4 74.6004 61.2 74.2004L66.7 71.0004L70.5 68.8004L76 65.6004C76.7 65.2004 77.6 65.2004 78.4 65.6004L82.7 68.1004C83.4 68.5004 83.9 69.3004 83.9 70.2004V75.2004C83.9 76.0004 83.5 76.8004 82.7 77.3004L78.5 79.8004C77.8 80.2004 76.9 80.2004 76.1 79.8004L71.8 77.3004C71.1 76.9004 70.6 76.1004 70.6 75.2004V72.0004L66.8 74.2004V77.5004C66.8 78.3004 67.2 79.1004 68 79.6004L76.1 84.3004C76.8 84.7004 77.7 84.7004 78.5 84.3004L86.6 79.6004C87.3 79.2004 87.8 78.4004 87.8 77.5004V68.0004C87.8 67.2004 87.4 66.4004 86.6 65.9004L78.5 61.2004Z" fill="white" />
    </g>
    <defs>
      <radialGradient id="paint0_angular_7794_139760" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(73.9503 76.2474) rotate(-64.8708) scale(84.9933 85.4796)">
        <stop offset="0.0665921" stop-color="#00B4F6" stop-opacity="0" />
        <stop offset="0.530269" stop-color="#E4F5FF" stop-opacity="0" />
        <stop offset="0.746882" stop-color="#7CD2ED" />
        <stop offset="0.851848" stop-color="#00B4F6" />
        <stop offset="0.984387" stop-color="#00B4F6" />
      </radialGradient>
      <clipPath id="clip0_7794_139760">
        <rect width="38.4" height="33.5" fill="white" transform="translate(49.5 51)" />
      </clipPath>
    </defs>
  </svg>
);

const SuccessIcon = () => (
  <svg width="136" height="152" viewBox="0 0 136 152" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path opacity="0.1" d="M81.079 150.251C72.4445 152.034 63.5432 152.099 54.8835 150.443C46.2238 148.786 37.9752 145.44 30.6087 140.595C23.2423 135.75 16.9021 129.502 11.9503 122.207C6.99853 114.912 3.53206 106.714 1.74884 98.079C-0.0343869 89.4445 -0.0994465 80.5432 1.55737 71.8835C3.21419 63.2238 6.56045 54.9752 11.4051 47.6087C16.2497 40.2422 22.4978 33.9021 29.7927 28.9503C37.0876 23.9985 45.2864 20.5321 53.921 18.7488C62.5555 16.9656 71.4568 16.9006 80.1165 18.5574C88.7762 20.2142 97.0248 23.5604 104.391 28.4051C111.758 33.2497 118.098 39.4978 123.05 46.7927C128.001 54.0876 131.468 62.2864 133.251 70.921C135.034 79.5555 135.099 88.4568 133.443 97.1165C131.786 105.776 128.44 114.025 123.595 121.391C118.75 128.758 112.502 135.098 105.207 140.05C97.9124 145.001 89.7136 148.468 81.079 150.251L81.079 150.251Z" stroke="#281136" stroke-width="0.722591" />
    <path opacity="0.25" d="M81.079 134.251C72.4445 136.034 63.5432 136.099 54.8835 134.443C46.2238 132.786 37.9752 129.44 30.6087 124.595C23.2423 119.75 16.9021 113.502 11.9503 106.207C6.99853 98.9124 3.53206 90.7136 1.74884 82.079C-0.0343869 73.4445 -0.0994465 64.5432 1.55737 55.8835C3.21419 47.2238 6.56045 38.9752 11.4051 31.6087C16.2497 24.2422 22.4978 17.9021 29.7927 12.9503C37.0876 7.99853 45.2864 4.53206 53.921 2.74884C62.5555 0.965613 71.4568 0.900554 80.1165 2.55737C88.7762 4.2142 97.0248 7.56045 104.391 12.4051C111.758 17.2497 118.098 23.4978 123.05 30.7927C128.001 38.0876 131.468 46.2864 133.251 54.921C135.034 63.5555 135.099 72.4568 133.443 81.1165C131.786 89.7762 128.44 98.0248 123.595 105.391C118.75 112.758 112.502 119.098 105.207 124.05C97.9124 129.001 89.7136 132.468 81.079 134.251L81.079 134.251Z" stroke="white" stroke-width="0.722591" />
    <circle opacity="0.2" cx="67.5" cy="67.5" r="51.5" fill="#8AE92C" />
    <path d="M53.707 67.4668L62.9238 76.6836L81.2949 58.3125" stroke="#8AE92C" stroke-width="8" stroke-linecap="square" />
  </svg>
)

const TelegramIcon = () => (
  <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect y="0.604492" width="47.4161" height="47.4161" rx="23.708" fill="#7535FB" />
    <path d="M32.8726 16.507L29.5283 30.2906C29.3709 30.9398 28.643 31.2742 28.0463 30.966L23.8169 28.7825L21.8169 32.0546C21.2727 32.9464 19.8956 32.5595 19.8956 31.5169V27.8711C19.8956 27.5891 20.0137 27.3202 20.2169 27.1235L28.4595 19.2547C28.4529 19.1564 28.348 19.0711 28.2431 19.1432L18.4071 25.9891L15.1022 24.2842C14.3284 23.8842 14.3612 22.7629 15.1612 22.4154L31.4561 15.3137C32.2364 14.9727 33.0758 15.6744 32.8725 16.5071L32.8726 16.507Z" fill="white" />
  </svg>
)

const TwitterIcon = () => (
  <svg width="49" height="49" viewBox="0 0 49 49" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="0.916748" y="0.604492" width="47.4161" height="47.4161" rx="23.708" fill="#7535FB" />
    <path d="M25.242 19.6843L25.2977 20.5388L24.3698 20.4342C20.9923 20.0331 18.0416 18.6728 15.5362 16.3882L14.3114 15.2547L13.9959 16.0918C13.3279 17.9578 13.7547 19.9285 15.1465 21.2539C15.8888 21.9863 15.7218 22.0909 14.4413 21.655C13.9959 21.5154 13.6062 21.4108 13.5691 21.4631C13.4392 21.5852 13.8846 23.1722 14.2372 23.8C14.7197 24.672 15.7033 25.5265 16.7796 26.0323L17.689 26.4334L16.6126 26.4508C15.5734 26.4508 15.5362 26.4682 15.6476 26.8345C16.0187 27.968 17.4848 29.1714 19.1179 29.6945L20.2685 30.0608L19.2664 30.6188C17.7818 31.421 16.0373 31.8745 14.2929 31.9094C13.4578 31.9268 12.7711 31.9966 12.7711 32.0489C12.7711 32.2233 15.0352 33.1999 16.3528 33.5835C20.3056 34.7171 25.0008 34.2288 28.5268 32.293C31.0321 30.9153 33.5374 28.1773 34.7065 25.5265C35.3375 24.1139 35.9685 21.5329 35.9685 20.2947C35.9685 19.4925 36.0242 19.3878 37.0634 18.4287C37.6758 17.8706 38.2511 17.2602 38.3625 17.0858C38.548 16.7545 38.5295 16.7545 37.583 17.0509C36.0056 17.5741 35.7829 17.5044 36.5623 16.7196C37.1376 16.1615 37.8243 15.15 37.8243 14.8536C37.8243 14.8013 37.5459 14.8885 37.2304 15.0454C36.8964 15.2198 36.1541 15.4814 35.5973 15.6384L34.5952 15.9348L33.6859 15.3593C33.1848 15.0454 32.4796 14.6966 32.1084 14.592C31.162 14.3478 29.7145 14.3827 28.8608 14.6617C26.5411 15.4465 25.075 17.4695 25.242 19.6843Z" fill="white" />
  </svg>
)

const TiktokIcon = () => (
  <svg width="49" height="49" viewBox="0 0 49 49" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="0.833618" y="0.604492" width="47.4161" height="47.4161" rx="23.708" fill="#7535FB" />
    <path d="M33.6568 22.3135C33.485 22.3302 33.3124 22.3389 33.1397 22.3397C32.2074 22.3398 31.2897 22.1078 30.4694 21.6645C29.6492 21.2212 28.9523 20.5807 28.4415 19.8006V28.4468C28.4415 29.7107 28.0668 30.9462 27.3646 31.9971C26.6624 33.048 25.6643 33.8671 24.4967 34.3508C23.329 34.8344 22.0441 34.961 20.8045 34.7144C19.5648 34.4678 18.4262 33.8592 17.5325 32.9655C16.6388 32.0718 16.0301 30.9331 15.7836 29.6935C15.537 28.4539 15.6635 27.169 16.1472 26.0013C16.6309 24.8336 17.45 23.8356 18.5008 23.1334C19.5517 22.4312 20.7873 22.0564 22.0512 22.0564C22.1846 22.0564 22.315 22.0684 22.4461 22.0767V25.2258C22.315 25.21 22.1861 25.1861 22.0512 25.1861C21.1862 25.1861 20.3566 25.5297 19.7449 26.1413C19.1333 26.753 18.7896 27.5826 18.7896 28.4476C18.7896 29.3126 19.1333 30.1422 19.7449 30.7538C20.3566 31.3655 21.1862 31.7091 22.0512 31.7091C23.8528 31.7091 25.4438 30.2897 25.4438 28.488L25.4753 13.8037H28.488C28.6257 15.1127 29.2191 16.3317 30.1645 17.2475C31.1099 18.1633 32.3471 18.7177 33.6598 18.8137V22.3135" fill="white" />
  </svg>
)

const FacebookIcon = () => (
  <svg width="49" height="49" viewBox="0 0 49 49" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="0.750366" y="0.604492" width="47.4161" height="47.4161" rx="23.708" fill="#7535FB" />
    <path fill-rule="evenodd" clip-rule="evenodd" d="M29.7749 16.7211C29.0955 16.5868 28.1779 16.4864 27.6008 16.4864C26.0381 16.4864 25.9366 17.1581 25.9366 18.2329V20.1462H29.8429L29.5024 24.1093H25.9366V36.1641H21.0455V24.1093H18.5316V20.1462H21.0455V17.6947C21.0455 14.3369 22.6418 12.4561 26.6496 12.4561C28.042 12.4561 29.0611 12.6576 30.3856 12.9263L29.7749 16.7211Z" fill="white" />
  </svg>
)

const WhatsAppIcon = () => (
  <svg width="49" height="49" viewBox="0 0 49 49" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="0.667236" y="0.604492" width="47.4161" height="47.4161" rx="23.708" fill="#7535FB" />
    <path d="M24.2383 11.2139C17.1216 11.2139 11.3518 16.9385 11.3518 24.0009C11.3518 26.4167 12.0275 28.6761 13.201 30.6037L10.8752 37.4639L18.0099 35.1973C19.856 36.2101 21.9793 36.7879 24.2383 36.7879C31.3558 36.7879 37.1252 31.0624 37.1252 24.0009C37.1252 16.9385 31.3558 11.2139 24.2383 11.2139ZM30.6462 28.857C30.343 29.6086 28.9719 30.2945 28.3669 30.3261C27.7626 30.3581 27.7454 30.7945 24.4505 29.3632C21.1561 27.9315 19.1741 24.4504 19.0178 24.2262C18.8614 24.0029 17.7416 22.4071 17.802 20.8012C17.8628 19.1949 18.7423 18.4371 19.0562 18.122C19.3697 17.8063 19.7292 17.7498 19.9487 17.7462C20.2081 17.742 20.3762 17.7385 20.5682 17.7455C20.76 17.7528 21.0482 17.7054 21.2977 18.3689C21.547 19.0324 22.1439 20.663 22.2203 20.8292C22.2966 20.9956 22.3438 21.1882 22.2263 21.4017C22.1084 21.6158 22.048 21.7495 21.877 21.9339C21.705 22.1184 21.5152 22.3466 21.3618 22.4876C21.1907 22.6438 21.012 22.8141 21.1919 23.1479C21.3717 23.4815 21.9919 24.575 22.9368 25.4762C24.1511 26.6346 25.1984 27.0189 25.5206 27.194C25.8438 27.37 26.0366 27.3504 26.237 27.1395C26.4365 26.9287 27.0948 26.2169 27.3266 25.8992C27.5583 25.5805 27.7755 25.6429 28.0732 25.7627C28.3708 25.8829 29.9574 26.7328 30.2806 26.9083C30.6035 27.0834 30.8193 27.1736 30.8964 27.3126C30.9736 27.452 30.9492 28.1054 30.6462 28.857Z" fill="white" />
  </svg>
)

const InstagramIcon = () => (
  <svg width="48" height="49" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="0.583984" y="0.604492" width="47.4161" height="47.4161" rx="23.708" fill="#7535FB" />
    <path fill-rule="evenodd" clip-rule="evenodd" d="M34.5889 28.4903C34.5889 30.3832 33.9305 32.0291 32.7784 33.1812C31.6262 34.3334 29.9803 34.9095 28.1697 34.9095H19.1994C17.3889 34.9095 15.743 34.3334 14.5908 33.1812C13.3564 32.0291 12.7803 30.3832 12.7803 28.4903V19.4377C12.7803 15.652 15.3315 13.0186 19.1994 13.0186H28.252C30.1449 13.0186 31.7085 13.6769 32.8607 14.8291C34.0128 15.9812 34.5889 17.5449 34.5889 19.4377V28.4903ZM29.4857 19.3552C28.745 19.3552 28.1689 18.7791 28.1689 18.0384C28.1689 17.2978 28.745 16.7217 29.4857 16.7217C30.2264 16.7217 30.8024 17.2978 30.8024 18.0384C30.8024 18.7791 30.2264 19.3552 29.4857 19.3552ZM23.643 29.4765C20.5158 29.4765 18.0469 26.9253 18.0469 23.8804C18.0469 20.7531 20.5981 18.2842 23.643 18.2842C26.688 18.2842 29.3215 20.7531 29.3215 23.8804C29.3215 27.0076 26.7703 29.4765 23.643 29.4765ZM23.6421 27.5022C25.642 27.5022 27.2632 25.881 27.2632 23.8811C27.2632 21.8813 25.642 20.2601 23.6421 20.2601C21.6423 20.2601 20.0211 21.8813 20.0211 23.8811C20.0211 25.881 21.6423 27.5022 23.6421 27.5022Z" fill="white" />
  </svg>
)
